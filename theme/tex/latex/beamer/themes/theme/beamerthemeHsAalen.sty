% beamerthemeHsAalen.sty
% Template zur Erstellung von Präsentationen mit LaTeX Beamer
% erstellt: Ruben Schwarz 2011
% geändert: Christian Silfang Apr-2016
% geändert: Fabian Kurz 2016-04-30
% HTW Aalen Logo muss im Unterordner bilder/ liegen. Dateiname: logo.xxx
% Verwendung:
%% \PassOptionsToPackage{table}{xcolor} %% über documentclass
%% \usetheme{HsAalen}%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%Einbindung Schriftart%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%\usepackage[default,osfigures,scale=1]{opensans}  %% Alternative Schriftart
% \usepackage{sansmathfonts}  %% Math font
% \usepackage{arev}  %% Math font 2
\usepackage{sansmath}
\sansmath
\usepackage{helvet} %% Latex Arial-Klon

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Einbindung benötigter Packages%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[absolute,overlay]{textpos} 
\usepackage{tikz}
\usepackage{array, tabularx}
\usepackage{colortbl}
\usepackage[abs]{overpic}


\renewcommand{\arraystretch}{1.2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%% Definition von Theme-Optionen%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Option Image auf Titelseite
\newif\iftitleimg 

%Option Frametitel auf Höhe Logo
\newif\iftopframetitle

%Option Frametitel zweizeilig möglich
\newif\iftopframetitlesingleline

%Option Seperation Line unter der Kopfzeile
\newif\ifseparationline

%Option blauer Balken in Fußzeile
\newif\iffooterbg

%Option Höhe des Bilds auf Titelseite mit Initalisierung 20mm
\newlength\imgheight
\imgheight=20mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Definition neuer Kommandos%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Kommando zum festlegen des Bilds auf Titelseite
\def\titleimage#1{\def\@titleimage{#1}}

%Kommando für Formatierung Tablehead - NOT WORKING

%\newcommand{\tablehead}[1]{
% \textbf{#1}
%\textcolor{white}{#1 }
 %}

%Tabellenvorlage 1 - Aus PowerPoint Präsentation

\newenvironment{hstable1}[1]{%
	\begin{table}
	\rowcolors{2}{hslightsteelgrey}{hssteelgrey}
	\setlength{\arrayrulewidth}{0.5pt} 
	\begin{tabular}{#1}
	\rowcolor{hsblue}
	\arrayrulecolor{white}
	\hline}
{\hline \end{tabular} \end{table}}

%Tabellenvorlage 2- Aus Styleguide

\newenvironment{hstable2}[2]{%
	\begin{table}
	\textbf{\textcolor{hsblue}{ #2}} \\
	\rowcolors{2}{white}{hsblue!20}
	 \setlength{\arrayrulewidth}{1pt} 
	\begin{tabular}{#1}
	\arrayrulecolor{hsblue}
	\hline}
	{%
	\hline \end{tabular} \end{table}}

%Design -  Doppelpfeil

\newcommand{\hsarrow}[2][hsblue]{%
	\begin{tikzpicture}[scale=#2]
	\draw [#1, fill=#1] (0,0) -- (0.04,0) -- (0.123,0.120) -- (0.04,0.24) -- (0,0.24) -- (0.07,0.120) --(0,0);
	\draw [#1, fill=#1] (0.103,0) -- (0.143,0) -- (0.226,0.120) -- (0.143,0.24) -- (0.103,0.24) -- (0.172,0.120) --(0.103,0);
	\end{tikzpicture}}

%Design - Designband durchgängig 

\newcommand{\hsdesignrectangle}[1][0.99]{%
	\begin{center}
	\makebox[0pt]{\resizebox{1.1\paperwidth}{!}{%
	\begin{tikzpicture}[scale=#1]
	\draw [hsblue2, fill=hsblue2] (0 ,0) -- ( \paperwidth ,0) -- (\paperwidth ,0.042 \paperwidth) -- (0,0.042 \paperwidth) ;
	\end{tikzpicture}
	}%
	}
	\end{center}}

%Design - Designband Einzelobjekt

\newcommand{\hsdesignbarone}[1][0.99]{%
	\begin{tikzpicture}[scale=#1]
	\draw [hsblue2, fill=hsblue2] (0 ,0) -- (0.333 \textwidth ,0) -- (0.333 \textwidth ,0.042 \textwidth) -- (0,0.0284 \textwidth) ;
	\end{tikzpicture}
	}

%Design - Designband dreigeteilt

\newcommand{\hsdesignbarthree}[1][0.99]{%
	\begin{tikzpicture}[scale=#1]
	\draw [hsblue2, fill=hsblue2] (0,0)  -- (0.333 \textwidth ,0.009 \textwidth)-- (0.333 \textwidth ,0.0375 \textwidth ) -- (0,0.042 \textwidth );
	\draw [hsblue4, fill=hsblue4] (0.333 \textwidth ,0.0375 \textwidth )  -- (0.666 \textwidth ,0.042 \textwidth ) -- (0.666 \textwidth ,0)-- (0.333 \textwidth ,0.009 \textwidth ) ;
	\draw [hsblue2, fill=hsblue2] (0.666 \textwidth ,0)  -- (\textwidth ,0.009 \textwidth) -- ( \textwidth ,0.0375 \textwidth) -- (0.666 \textwidth ,0.042 \textwidth);
	\end{tikzpicture}}

%Design - Designband viergeteilt

\newcommand{\hsdesignbarfour}[1][0.99]{%
	\begin{tikzpicture}[scale=#1]
	\draw [hsblue2, fill=hsblue2] (0,0) -- (0.1667 \textwidth ,0.0136 \textwidth ) -- (0.1667 \textwidth ,0.042 \textwidth) -- (0,0.042 \textwidth );
	\draw [hsblue4, fill=hsblue4] (0.1667 \textwidth ,0.0136 \textwidth ) -- (0.5\textwidth ,0) -- (0.5 \textwidth ,0.042 \textwidth ) -- (0.1667 \textwidth ,0.042 \textwidth ) ;
	\draw [hsblue2, fill=hsblue2] (0.5 \textwidth ,0) -- (0.833 \textwidth ,0.0136 \textwidth) -- (0.833 \textwidth ,0.042 \textwidth) -- (0.5 \textwidth ,0.042 \textwidth) ;
	\draw [hsblue4, fill=hsblue4] (0.833 \textwidth ,0.0136 \textwidth ) -- ( \textwidth ,0) -- ( \textwidth ,0.042 \textwidth ) -- (0.833 \textwidth ,0.042 \textwidth );
	\end{tikzpicture}}


%Themenauswahl - Schnelle Setzung von Optionen

\newcommand{\hsthemeA}{\titleimgfalse \topframetitlefalse \topframetitlesinglelinetrue \separationlinefalse \footerbgfalse} %PowerPoint Stil
\newcommand{\hsthemeB}{\titleimgtrue \topframetitletrue \topframetitlesinglelinefalse \separationlinetrue \footerbgtrue} %Styleguide Stil


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%Festlegung Beamertheme Styleelemente%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mode<presentation>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%Farbdefinitionen%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Hauptfarbe 
\definecolor{hsblue}{RGB}{0,106,178} %HKS 44 100%

%Weitere Farben
\definecolor{hsblue2}{RGB}{28,129,195}  %%ähnlich hsblue!80
\definecolor{hsblue3}{RGB}{0,113,188}%%ähnlich hsblue
\definecolor{hsblue4}{RGB}{19,98,162} %%dunkelblau
\definecolor{hsblue5}{RGB}{0,58,158} %%dunkelstes blau

\definecolor{hslightgrey}{RGB}{247,249,249}
\definecolor{hslightsteelgrey}{RGB}{220,229,231}
\definecolor{hssteelgrey}{RGB}{185,203,207}
\definecolor{hsdarksteelgrey}{RGB}{132,145,148}
\definecolor{hsgrey30}{RGB}{77,77,77}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%Farb- und Schriftformatierung%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Formatiere Aufzählungen

\setbeamercolor{itemize item}{bg=hsblue,fg=hsblue}
\setbeamercolor{itemize subitem}{bg=hsblue,fg=hsblue}
\setbeamercolor{itemize subsubitem}{bg=hsblue,fg=hsblue}
\setbeamercolor{itemize subsubsubitem}{bg=hsblue,fg=hsblue}
\setbeamercolor{enumerate item}{fg=hsblue}
\setbeamercolor{enumerate subitem}{fg=hsblue}
\setbeamercolor{enumerate subsubitem}{fg=hsblue}
\setbeamercolor{enumerate subsubsubitem}{fg=hsblue}

% Formatiere Titel in Titelfolie

\setbeamercolor{title}{fg=hsblue, bg=white}
\setbeamerfont*{title}{series=\bfseries,size=\Huge}
\setbeamercolor{subtitle}{fg=hsblue}
\setbeamerfont*{subtitle}{series=\normalsize,size=\large}
\setbeamercolor{titlepage}{fg=black}
\setbeamerfont*{titlepage}{series=\normalfont,size=\normalsize}

% Formatiere Folienüberschriften

\setbeamerfont{frametitle}{series=\bfseries}
\setbeamercolor{frametitle}{fg= hsblue}

%Formatiere Bibliographie

\setbeamerfont{bibliography item}{size=\scriptsize}
\setbeamerfont{bibliography entry author}{size=\scriptsize}
\setbeamerfont{bibliography entry title}{size=\scriptsize}
\setbeamerfont{bibliography entry location}{size=\scriptsize}
\setbeamerfont{bibliography entry note}{size=\scriptsize}

\setbeamercolor{bibliography item}{parent=palette secondary}
\setbeamercolor*{bibliography entry title}{parent=palette primary}
\setbeamercolor{bibliography entry author}{fg=hsblue}
\setbeamercolor*{bibliography entry journal}{parent=palette primary}
\setbeamercolor*{bibliography entry note}{parent=palette primary}
\setbeamercolor{bibliography entry location}{fg=hsblue!60} 

%Formatiere allgemeines Farbverhalten
\setbeamercolor{palette primary}{fg=black,bg=black!15}
\setbeamercolor{palette secondary}{fg=hsblue,bg=black}
\setbeamercolor{palette tertiary}{fg=hsblue,bg=hsblue}
\setbeamercolor{palette quaternary}{fg=black,bg=black!15}
\setbeamercolor*{item projected}{fg=white,bg=hsblue}

%Formatiere Linie unter Kopfzeile
\setbeamercolor{separation line}{fg=hsblue,bg=hsblue}

%Formatiere Inhaltsverzeichnis
\setbeamercolor{section in toc}{fg=hsblue}
\setbeamercolor{subsection in toc}{fg=hsblue}

% Formatiere Schrift/Balken in Fußzeile

\setbeamercolor{author in title/head}{fg=white,bg=white}
\setbeamercolor{title in title/head}{fg=white,bg=white}
\setbeamercolor{title in head/foot}{fg=hsblue,bg=white}
\setbeamercolor{footercolor}{fg=hsblue,bg=white}
\setbeamercolor{footercolorwithbg}{fg=white,bg=white}
\setbeamercolor{title in head/foot}{fg=hsblue,bg=white}

% Formatiere Block-Umgebung

\setbeamercolor*{block title}{fg=white,bg=hsblue}
\setbeamercolor*{block title alerted}{use=alerted text,fg=white,bg=alerted text.fg!75!black}
\setbeamercolor*{block title example}{fg=white,bg=hsblue}

\setbeamercolor*{block body}{fg=black,bg=block title.bg!20}
\setbeamercolor{block body alerted}{parent=normal text,use=block title alerted,bg=block title alerted.bg!10!bg}
\setbeamercolor*{block body example}{fg=black,bg=block title example.bg!20}
\setbeamercolor*{block body theorem}{fg=black,bg=block title.bg!20}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%Formatierung von wiederkehrenden Objekten%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Schalte Navigationssymbole aus
\setbeamertemplate{navigation symbols}{}

% Kopfzeile ->Fallunterscheidung 

\setbeamertemplate{headline}{%
	\vskip 2mm % Abstand Logo zu oberer Rand
	%\hskip 3mm % Abstand linker Rand für 2. Logo
	%\hbox{\includegraphics[height=0.5cm]{bilder/firmen-logo}} % Firmenlogo (2. Logo)
	\hfill % Htw Logo rechtsbündig
	\hbox{\includegraphics[height=.6cm]{logo}}
	\hspace{2mm} % Abstand Logo zum rechten Rand
\iftopframetitle{%
\iftopframetitlesingleline{\vskip 1mm}\else{\vskip 6mm}\fi
\ifseparationline{\begin{beamercolorbox}[colsep=1.5pt,ht=.5ex]{separation line}\end{beamercolorbox}}\fi}
\fi}

% Fußzeile -> Fallunterscheidung
% 1. Prüfen
\newlength{\footerhoffset}

\defbeamertemplate*{footline}{newfootline}{%
\setlength{\footerhoffset}{\glueexpr\paperheight - 3mm\relax}
	\ifnum \insertpagenumber=1 % auf erster Seite ???
		%\leavemode%
	\else % alle anderen Seiten !!
		\iffooterbg{%
			%Date (Weiß)
			\begin{textblock*}{0.125\textwidth}(0.01\textwidth,\footerhoffset)
			{\centering
			\usebeamerfont{footercolorwithbg}
			\usebeamercolor[fg]{footercolorwithbg}
			\insertdate}
			\end{textblock*}
	
			%Authors (Weiß)
			\begin{textblock*}{0.75\textwidth}(0.125\textwidth,\footerhoffset)

			{\usebeamerfont{footercolorwithbg}
			\usebeamercolor[fg]{footercolorwithbg}
			\hspace*{\fill}
			\insertshortauthor}
			\hspace*{\fill}
			\end{textblock*}

			%Pagenumber (Weiß)

			\begin{textblock*}{0.12\textwidth}(0.92\textwidth,\footerhoffset)
			{\centering
			\usebeamerfont{footercolorwithbg}
			\usebeamercolor[fg]{footercolorwithbg}
			 \insertframenumber/\inserttotalframenumber}
			\end{textblock*}
		}
		\else{%
			\begin{textblock*}{0.125\textwidth}(0.01\textwidth,\footerhoffset)
			{\centering
			\usebeamerfont{footercolor}
			\usebeamercolor[fg]{footercolor}
			\insertdate}
			\end{textblock*}

			%Authors 
			\begin{textblock*}{0.75\textwidth}(0.125\textwidth,\footerhoffset)
			{\usebeamerfont{footercolor}
			\usebeamercolor[fg]{footercolor}
			\hspace*{\fill}
			\insertshortauthor}
			\hspace*{\fill}
			\end{textblock*}
	
			%Pagenumber
			\begin{textblock*}{0.12\textwidth}(0.92\textwidth,\footerhoffset)
			{\centering
			\usebeamerfont{footercolor}
			\usebeamercolor[fg]{footercolor}
			 \insertframenumber/\inserttotalframenumber}
			\end{textblock*}
			} 
		\fi
	 \fi
\iffooterbg{%
	\begin{beamercolorbox}[wd=\paperwidth,ht=4.5ex,dp=1ex]{separation line}
	 \end{beamercolorbox}}
	\else{
	\begin{beamercolorbox}[wd=\paperwidth,ht=4.5ex,dp=1ex]{}
	 \end{beamercolorbox}
	}
\fi
}

% 2. Setzen
\setbeamertemplate{footline}[newfootline]


%Titelseite
\setbeamertemplate{title page}{%

	\usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\par
	\bigskip
 	\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
 	\iftitleimg{\vspace{0.2\imgheight}}\else{\vspace{5mm}}\fi
 	 \usebeamerfont{titlepage}\usebeamercolor[fg]{titlepage}\textbf{\small\insertauthor}\par
	\smallskip
	  \usebeamerfont{titlepage}\usebeamercolor[fg]{titlepage}\small\insertinstitute\par
	\smallskip
	  \usebeamerfont{titlepage}\usebeamercolor[fg]{titlepage}\insertdate\par
	\iftitleimg
		\smallskip
		\begin{center}
		\includegraphics[height=\imgheight]{\@titleimage}
		\end{center}
	\fi
}

%Inhaltsverzeichnis Pfeile

\setbeamertemplate{section in toc}{%
  {\hsarrow[hsblue!60]{1}}~\inserttocsection}

\setbeamertemplate{subsection in toc}{%
  \hspace{1.2em}{\hsarrow[hsblue!40]{1}}~\inserttocsubsection\par}

\setbeamertemplate{subsubsection in toc}{%
  \hspace{2.4em}{\hsarrow[hsblue!20]{0.83}}~\inserttocsubsubsection\par}

%Listenelemente

\newcommand\centerbox[1]{$\vcenter{\hbox{#1}}$}
\defbeamertemplate*{itemize item}{custom circle}[1][.4ex]{%
 \centerbox{\tikz\fill (0,0) circle (#1);}}
\defbeamertemplate*{itemize subsubitem}{custom circle}[1][.4ex]{%
  \centerbox{\tikz\fill (0,0) circle (#1);}}
\defbeamertemplate*{itemize subitem}{custom square}[1][.35ex]{%
  \centerbox{\tikz\fill (-#1,-#1) rectangle (#1,#1);}}

\setbeamertemplate{itemize item}[custom circle]
\setbeamertemplate {itemize subitem}[custom square]{\footnotesize}
\setbeamertemplate {itemize subsubitem}[custom circle]{\scriptsize}

%Nummerierungselemente

\setbeamertemplate {enumerate item}[default]
\setbeamertemplate {enumerate subitem}[default]{\footnotesize}
\setbeamertemplate {enumerate subsubitem}[default]{\scriptsize}
\setbeamertemplate {enumerate subsubsubitem}[default]{\tiny}


%Frametitle

\setbeamertemplate{frametitle}{%
\iftopframetitle{%
	\begin{textblock*}{0.65\textwidth}(10mm,1ex){%	
		\usebeamercolor[fg]{frametitle}
		\usebeamerfont{header_font_subsection}{\bf \insertframetitle}}
	\end{textblock*}}
\else{
	\vspace{1cm} % frametitle knapp unter headline setzen
	\vbox{}\vskip-6.5ex
	\begin{beamercolorbox}[wd=\paperwidth,ht=1.80ex,leftskip=0.4cm,dp=0.6ex,]{frametitle}
		\usebeamerfont{header_font_subsection}{\bf \insertframetitle}
	\end{beamercolorbox}%

}\fi
}

% Bibliography Elemente
\setbeamertemplate{bibliography item}[text]

\mode
<all>
